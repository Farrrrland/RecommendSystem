{"remainingRequest":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/babel-loader/lib/index.js!/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhangyuwei/Documents/vue/RecommendSystem/src/api/Like.js","dependencies":[{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/src/api/Like.js","mtime":1623577760383},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0ICRyb3V0ZXJfZnVuYyBmcm9tICcuLi9jb21tb24vcm91dGVyJzsKCnZhciBjaGVja0luZm8gPSBmdW5jdGlvbiBjaGVja0luZm8ob2JqLCBmaWQpIHsKICB2YXIgdWlkID0gIiI7CgogIGlmICh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9naW4nKSA9PSAndHJ1ZScpIHsKICAgIHVpZCA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1aWQnKTsKICAgIGF4aW9zLnBvc3QoImh0dHA6Ly8xMTEuMjI5LjgxLjkyOjgwMDAvaW5kZXgvZmF2b3VyaXRlL2xpc3RBcGkiLCBKU09OLnN0cmluZ2lmeSh7CiAgICAgIGZpZDogZmlkLAogICAgICB1aWQ6IHVpZAogICAgfSksIHsKICAgICAgaGVhZGVyczogewogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgICBpZiAocmVzcG9uc2UuZGF0YVswXSA9PSAyMDApIHsKICAgICAgICB2YXIgY250ID0gcmVzcG9uc2UuZGF0YVsxXS5yZXN1bHRfY291bnQ7CiAgICAgICAgY29uc29sZS5sb2coY250KTsKCiAgICAgICAgaWYgKGNudCA9PSAwKSB7CiAgICAgICAgICBvYmouJG1lc3NhZ2Uuc3VjY2Vzcygi5oiQ5Yqf5re75Yqg5Yiw5pS26JePIik7CiAgICAgICAgICBhZGRMaWtlKGZpZCwgdWlkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb2JqLiRtZXNzYWdlLmVycm9yKCLmgqjlt7LmlLbol4/ov4for6XmnaHnm64iKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coInVua25vd24gZXJyb3IiKTsKICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICB2YXIgYWx0ID0gY29uZmlybSgi6K+35YWI55m75b2VIik7CgogICAgaWYgKGFsdCkgewogICAgICAkcm91dGVyX2Z1bmMuYmFja3RvTG9naW4ob2JqKTsKICAgIH0KICB9Cn07Cgp2YXIgYWRkTGlrZSA9IGZ1bmN0aW9uIGFkZExpa2UoZmlkLCB1aWQpIHsKICBheGlvcy5wb3N0KCJodHRwOi8vMTExLjIyOS44MS45Mjo4MDAwL2luZGV4L2Zhdm91cml0ZS9pbnNlcnRBcGkiLCBKU09OLnN0cmluZ2lmeSh7CiAgICBmaWQ6IGZpZCwKICAgIHVpZDogdWlkCiAgfSksIHsKICAgIGhlYWRlcnM6IHsKICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgfQogIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgaWYgKHJlc3BvbnNlLmRhdGFbMF0gPT0gMjAxKSB7CiAgICAgIGNvbnNvbGUubG9nKCJzdWNjZXNzLCBzdGF0dXM6ICIgKyByZXNwb25zZS5kYXRhWzFdLm9wZXJhdGlvbik7CiAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGFbMF0gPT0gNDAwKSB7CiAgICAgIGNvbnNvbGUubG9nKCJlcnJvcjogIiArIHJlc3BvbnNlLmRhdGFbMV1bJ21zZyddKTsKICAgICAgY29uc29sZS5sb2coImZhaWwgdG8gYWRkIGZhdm91cml0ZSIpOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coInVua25vd24gZXJyb3IiKTsKICAgIH0KICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICB9KTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjaGVja0luZm86IGNoZWNrSW5mbwp9Ow=="},{"version":3,"sources":["/Users/zhangyuwei/Documents/vue/RecommendSystem/src/api/Like.js"],"names":["axios","$router_func","checkInfo","obj","fid","uid","window","sessionStorage","getItem","post","JSON","stringify","headers","then","response","console","log","data","cnt","result_count","$message","success","addLike","error","catch","alt","confirm","backtoLogin","operation"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport $router_func from '../common/router'\n\nvar checkInfo = function (obj, fid) {\n    let uid = \"\"\n    if(window.sessionStorage.getItem('login') == 'true') {\n        uid = window.sessionStorage.getItem('uid')\n        axios.post(\"http://111.229.81.92:8000/index/favourite/listApi\", \n        JSON.stringify({\n            fid: fid,\n            uid: uid\n        }),\n        {\n            headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n            }\n        })\n        .then ((response) => {\n            console.log(response);\n            if (response.data[0]==200) {\n                let cnt = response.data[1].result_count;\n                console.log(cnt);\n                if(cnt == 0) {\n                    obj.$message.success(\"成功添加到收藏\")\n                    addLike(fid, uid);\n                }\n                else {\n                    obj.$message.error(\"您已收藏过该条目\")\n                }\n            }else {\n                console.log(\"unknown error\")\n            }\n        })\n        .catch (\n            (error) => {\n                console.log(error);\n        })\n    }\n    else {\n        let alt = confirm(\"请先登录\");\n        if(alt) {\n            $router_func.backtoLogin(obj)\n        }\n    }\n    \n}\n\nvar addLike = function (fid, uid) {\n    axios.post(\"http://111.229.81.92:8000/index/favourite/insertApi\", \n        JSON.stringify({\n            fid: fid,\n            uid: uid\n        }),\n        {\n            headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n            }\n        }\n    )\n    .then ((response) => {\n        console.log(response);\n        if (response.data[0]==201) {\n            console.log(\"success, status: \" + response.data[1].operation);\n        }else if (response.data[0]==400) {\n            console.log(\"error: \" + response.data[1]['msg']);\n            console.log(\"fail to add favourite\")\n        }else {\n            console.log(\"unknown error\")\n        }\n    })\n    .catch (\n        (error) => {\n            console.log(error);\n    })\n}\n\nexport default {\n    checkInfo\n}"]}]}