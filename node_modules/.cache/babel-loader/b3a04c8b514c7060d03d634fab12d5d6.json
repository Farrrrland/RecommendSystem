{"remainingRequest":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/babel-loader/lib/index.js!/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhangyuwei/Documents/vue/RecommendSystem/src/api/Like.js","dependencies":[{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/src/api/Like.js","mtime":1622858763207},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0ICRyb3V0ZXJfZnVuYyBmcm9tICcuLi9jb21tb24vcm91dGVyJzsKCnZhciBjaGVja0luZm8gPSBmdW5jdGlvbiBjaGVja0luZm8ob2JqLCBmaWQpIHsKICB2YXIgdWlkID0gIiI7CgogIGlmICh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9naW4nKSA9PSAndHJ1ZScpIHsKICAgIHVpZCA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1aWQnKTsKICAgIGF4aW9zLnBvc3QoImh0dHA6Ly8xMTEuMjI5LjgxLjkyOjgwMDAvaW5kZXgvZmF2b3VyaXRlL2xpc3RBcGkiLCBKU09OLnN0cmluZ2lmeSh7CiAgICAgIGZpZDogZmlkLAogICAgICB1aWQ6IHVpZAogICAgfSksIHsKICAgICAgaGVhZGVyczogewogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgICBpZiAocmVzcG9uc2UuZGF0YVswXSA9PSAyMDApIHsKICAgICAgICB2YXIgY250ID0gcmVzcG9uc2UuZGF0YVsxXS5yZXN1bHRfY291bnQ7CiAgICAgICAgY29uc29sZS5sb2coY250KTsKCiAgICAgICAgaWYgKGNudCA9PSAwKSB7CiAgICAgICAgICBhZGRMaWtlKGZpZCwgdWlkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoIuaCqOW3suaUtuiXj+i/h+ivpeadoeebriIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgidW5rbm93biBlcnJvciIpOwogICAgICB9CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHZhciBhbHQgPSBjb25maXJtKCLor7flhYjnmbvlvZUiKTsKCiAgICBpZiAoYWx0KSB7CiAgICAgICRyb3V0ZXJfZnVuYy5iYWNrdG9Mb2dpbihvYmopOwogICAgfQogIH0KfTsKCnZhciBhZGRMaWtlID0gZnVuY3Rpb24gYWRkTGlrZShmaWQsIHVpZCkgewogIGF4aW9zLnBvc3QoImh0dHA6Ly8xMTEuMjI5LjgxLjkyOjgwMDAvaW5kZXgvZmF2b3VyaXRlL2luc2VydEFwaSIsIEpTT04uc3RyaW5naWZ5KHsKICAgIGZpZDogZmlkLAogICAgdWlkOiB1aWQKICB9KSwgewogICAgaGVhZGVyczogewogICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24iCiAgICB9CiAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKCiAgICBpZiAocmVzcG9uc2UuZGF0YVswXSA9PSAyMDEpIHsKICAgICAgY29uc29sZS5sb2coInN1Y2Nlc3MsIHN0YXR1czogIiArIHJlc3BvbnNlLmRhdGFbMV0ub3BlcmF0aW9uKTsKICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YVswXSA9PSA0MDApIHsKICAgICAgY29uc29sZS5sb2coImVycm9yOiAiICsgcmVzcG9uc2UuZGF0YVsxXVsnbXNnJ10pOwogICAgfSBlbHNlIHsKICAgICAgYWxlcnQoInVua25vd24gZXJyb3IiKTsKICAgIH0KICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICB9KTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjaGVja0luZm86IGNoZWNrSW5mbwp9Ow=="},{"version":3,"sources":["/Users/zhangyuwei/Documents/vue/RecommendSystem/src/api/Like.js"],"names":["axios","$router_func","checkInfo","obj","fid","uid","window","sessionStorage","getItem","post","JSON","stringify","headers","then","response","console","log","data","cnt","result_count","addLike","alert","catch","error","alt","confirm","backtoLogin","operation"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,kBAAzB;;AAEA,IAAIC,SAAS,GAAG,SAAZA,SAAY,CAAUC,GAAV,EAAeC,GAAf,EAAoB;AAChC,MAAIC,GAAG,GAAG,EAAV;;AACA,MAAGC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,KAA0C,MAA7C,EAAqD;AACjDH,IAAAA,GAAG,GAAGC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,KAA9B,CAAN;AACAR,IAAAA,KAAK,CAACS,IAAN,CAAW,mDAAX,EACAC,IAAI,CAACC,SAAL,CAAe;AACXP,MAAAA,GAAG,EAAEA,GADM;AAEXC,MAAAA,GAAG,EAAEA;AAFM,KAAf,CADA,EAKA;AACIO,MAAAA,OAAO,EAAE;AACT,wBAAgB,kBADP;AAET,kBAAU;AAFD;AADb,KALA,EAWCC,IAXD,CAWO,UAACC,QAAD,EAAc;AACjBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,UAAIA,QAAQ,CAACG,IAAT,CAAc,CAAd,KAAkB,GAAtB,EAA2B;AACvB,YAAIC,GAAG,GAAGJ,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBE,YAA3B;AACAJ,QAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;;AACA,YAAGA,GAAG,IAAI,CAAV,EAAa;AACTE,UAAAA,OAAO,CAAChB,GAAD,EAAMC,GAAN,CAAP;AACH,SAFD,MAGK;AACDgB,UAAAA,KAAK,CAAC,UAAD,CAAL;AACH;AACJ,OATD,MASM;AACFA,QAAAA,KAAK,CAAC,eAAD,CAAL;AACH;AACJ,KAzBD,EA0BCC,KA1BD,CA2BI,UAACC,KAAD,EAAW;AACPR,MAAAA,OAAO,CAACC,GAAR,CAAYO,KAAZ;AACP,KA7BD;AA8BH,GAhCD,MAiCK;AACD,QAAIC,GAAG,GAAGC,OAAO,CAAC,MAAD,CAAjB;;AACA,QAAGD,GAAH,EAAQ;AACJvB,MAAAA,YAAY,CAACyB,WAAb,CAAyBvB,GAAzB;AACH;AACJ;AAEJ,CA1CD;;AA4CA,IAAIiB,OAAO,GAAG,SAAVA,OAAU,CAAUhB,GAAV,EAAeC,GAAf,EAAoB;AAC9BL,EAAAA,KAAK,CAACS,IAAN,CAAW,qDAAX,EACIC,IAAI,CAACC,SAAL,CAAe;AACXP,IAAAA,GAAG,EAAEA,GADM;AAEXC,IAAAA,GAAG,EAAEA;AAFM,GAAf,CADJ,EAKI;AACIO,IAAAA,OAAO,EAAE;AACT,sBAAgB,kBADP;AAET,gBAAU;AAFD;AADb,GALJ,EAYCC,IAZD,CAYO,UAACC,QAAD,EAAc;AACjBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,QAAIA,QAAQ,CAACG,IAAT,CAAc,CAAd,KAAkB,GAAtB,EAA2B;AACvBF,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsBF,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBU,SAAnD;AACH,KAFD,MAEM,IAAIb,QAAQ,CAACG,IAAT,CAAc,CAAd,KAAkB,GAAtB,EAA2B;AAC7BF,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAYF,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiB,KAAjB,CAAxB;AACH,KAFK,MAEA;AACFI,MAAAA,KAAK,CAAC,eAAD,CAAL;AACH;AACJ,GArBD,EAsBCC,KAtBD,CAuBI,UAACC,KAAD,EAAW;AACPR,IAAAA,OAAO,CAACC,GAAR,CAAYO,KAAZ;AACP,GAzBD;AA0BH,CA3BD;;AA6BA,eAAe;AACXrB,EAAAA,SAAS,EAATA;AADW,CAAf","sourcesContent":["import axios from 'axios'\nimport $router_func from '../common/router'\n\nvar checkInfo = function (obj, fid) {\n    let uid = \"\"\n    if(window.sessionStorage.getItem('login') == 'true') {\n        uid = window.sessionStorage.getItem('uid')\n        axios.post(\"http://111.229.81.92:8000/index/favourite/listApi\", \n        JSON.stringify({\n            fid: fid,\n            uid: uid\n        }),\n        {\n            headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n            }\n        })\n        .then ((response) => {\n            console.log(response);\n            if (response.data[0]==200) {\n                let cnt = response.data[1].result_count;\n                console.log(cnt);\n                if(cnt == 0) {\n                    addLike(fid, uid);\n                }\n                else {\n                    alert(\"您已收藏过该条目\")\n                }\n            }else {\n                alert(\"unknown error\")\n            }\n        })\n        .catch (\n            (error) => {\n                console.log(error);\n        })\n    }\n    else {\n        let alt = confirm(\"请先登录\");\n        if(alt) {\n            $router_func.backtoLogin(obj)\n        }\n    }\n    \n}\n\nvar addLike = function (fid, uid) {\n    axios.post(\"http://111.229.81.92:8000/index/favourite/insertApi\", \n        JSON.stringify({\n            fid: fid,\n            uid: uid\n        }),\n        {\n            headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n            }\n        }\n    )\n    .then ((response) => {\n        console.log(response);\n        if (response.data[0]==201) {\n            console.log(\"success, status: \" + response.data[1].operation);\n        }else if (response.data[0]==400) {\n            console.log(\"error: \" + response.data[1]['msg']);\n        }else {\n            alert(\"unknown error\")\n        }\n    })\n    .catch (\n        (error) => {\n            console.log(error);\n    })\n}\n\nexport default {\n    checkInfo\n}"]}]}