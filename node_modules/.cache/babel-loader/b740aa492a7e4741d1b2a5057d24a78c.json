{"remainingRequest":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/babel-loader/lib/index.js!/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhangyuwei/Documents/vue/RecommendSystem/src/api/register.js","dependencies":[{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/src/api/register.js","mtime":1622613874114},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXJfZnVuYyBmcm9tICcuLi9jb21tb24vcm91dGVyJzsKZXhwb3J0IHZhciBzZW5kRW1haWwgPSBmdW5jdGlvbiBzZW5kRW1haWwob2JqKSB7CiAgdmFyIF90aGlzID0gdGhpczsKCiAgb2JqLmVtYWlsX3Bhc3N3b3JkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnNsaWNlKC02KTsKICBheGlvcy5wb3N0KCJodHRwOi8vMTExLjIyOS44MS45Mjo4MDAwL2luZGV4L3VzZXIvZW1haWxTZW5kQXBpIiwgSlNPTi5zdHJpbmdpZnkoewogICAgZW1haWxfYWRkcmVzczogb2JqLmVtYWlsX2FkZHJlc3MsCiAgICBlbWFpbF9wYXNzd29yZDogb2JqLmVtYWlsX3Bhc3N3b3JkCiAgfSksIHsKICAgIGhlYWRlcnM6IHsKICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgfQogIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKCiAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gIjIwMCIpIHsKICAgICAgY29uc29sZS5sb2coImVtYWlsIHNlbnQhIik7CiAgICAgIGNvbnNvbGUubG9nKCJ0cnVlIHZlcl9jb2RlOiIgKyBvYmouZW1haWxfcGFzc3dvcmQpOwoKICAgICAgX3RoaXMuJGFsZXJ0KCdWZXJpZmljYXRpb24gY29kZSBzZW50IScsICdNZXNzYWdlJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnT0snLAogICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjayhhY3Rpb24pIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICBtZXNzYWdlOiAiYWN0aW9uOiAiLmNvbmNhdChhY3Rpb24pCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgY29uc29sZS5sb2coZXJyb3IpOwogIH0pOwp9OwpleHBvcnQgdmFyIHVzZXJSZWdpc3RlciA9IGZ1bmN0aW9uIHVzZXJSZWdpc3RlcihvYmopIHsKICAvLyB2YXIgcHdkID0gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2VtYWlsX3B3ZCcpCiAgaWYgKG9iai52ZXJfY29kZSA9PSBvYmouZW1haWxfcGFzc3dvcmQpIHsKICAgIGNvbnNvbGUubG9nKG9iai51c2VyX25hbWUpOwogICAgY29uc29sZS5sb2cob2JqLnBhc3N3b3JkKTsKICAgIGF4aW9zLnBvc3QoImh0dHA6Ly8xMTEuMjI5LjgxLjkyOjgwMDAvaW5kZXgvdXNlci9yZWdpc3RlckFwaSIsIEpTT04uc3RyaW5naWZ5KHsKICAgICAgdXNlcm5hbWU6IG9iai51c2VyX25hbWUsCiAgICAgIHBhc3N3b3JkOiBvYmoucGFzc3dvcmQsCiAgICAgIGVtYWlsOiBvYmouZW1haWxfYWRkcmVzcwogICAgfSksIHsKICAgICAgaGVhZGVyczogewogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgICBpZiAocmVzcG9uc2UuZGF0YVswXSA9PSAiMjAxIikgewogICAgICAgIGFsZXJ0KCLms6jlhozmiJDlip8iKTsKICAgICAgICBjb25zb2xlLmxvZygidXNyIHN0YXR1czoiKTsKICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidWlkIiwgcmVzcG9uc2UuZGF0YVsxXS51aWQpOwogICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJsb2dpbiIsIHRydWUpOwogICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ1c3JlbWFpbCIsIG9iai5lbWFpbF9hZGRyZXNzKTsKICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndWlkJykpOwogICAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsb2dpbicpKTsKICAgICAgICByb3V0ZXJfZnVuYy50b0hvbWUob2JqKTsKICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICAvLyB0aGlzLiRhbGVydCgnUGxlYXNlIGVudGVyIHRoZSBjb3JyZWN0IHZlcmlmaWNhdGlvbiBjb2RlIScsICdFcnJvcicsIHsKICAgIC8vICAgICBjb25maXJtQnV0dG9uVGV4dDogJ09LJywKICAgIC8vICAgICBjYWxsYmFjazogYWN0aW9uID0+IHsKICAgIC8vICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAvLyAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAvLyAgICAgICAgICAgICBtZXNzYWdlOiBgYWN0aW9uOiAkeyBhY3Rpb24gfWAKICAgIC8vICAgICAgICAgfSk7CiAgICAvLyAgICAgfQogICAgLy8KICAgIC8vIH0pOwogICAgY29uc29sZS5sb2coIndyb25nIHZlcl9jb2RlIik7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgc2VuZEVtYWlsOiBzZW5kRW1haWwsCiAgdXNlclJlZ2lzdGVyOiB1c2VyUmVnaXN0ZXIKfTs="},{"version":3,"sources":["/Users/zhangyuwei/Documents/vue/RecommendSystem/src/api/register.js"],"names":["axios","router_func","sendEmail","obj","email_password","Math","random","toString","slice","post","JSON","stringify","email_address","headers","then","response","console","log","data","status","$alert","confirmButtonText","callback","action","$message","type","message","catch","error","userRegister","ver_code","user_name","password","username","email","alert","window","sessionStorage","setItem","uid","getItem","toHome"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport router_func from '../common/router'\nexport var sendEmail = function (obj) {\n    obj.email_password = Math.random().toString().slice(-6);\n    axios.post(\"http://111.229.81.92:8000/index/user/emailSendApi\",\n        JSON.stringify({\n            email_address:obj.email_address,\n            email_password: obj.email_password\n        }),\n        {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": \"application/json\"\n            }\n        }\n    )\n        .then ((response) => {\n            console.log(response.data)\n            if (response.data.status==\"200\") {\n                console.log(\"email sent!\")\n                console.log(\"true ver_code:\" + obj.email_password)\n                this.$alert('Verification code sent!', 'Message', {\n                    confirmButtonText: 'OK',\n                    callback: action => {\n                        this.$message({\n                            type: 'info',\n                            message: `action: ${ action }`\n                        });\n                    }\n                });\n            }\n        })\n        .catch (\n            (error) => {\n                console.log(error);\n            })\n}\n\nexport var userRegister = function (obj) {\n    // var pwd = window.sessionStorage.getItem('email_pwd')\n    if (obj.ver_code == obj.email_password) {\n        console.log(obj.user_name)\n        console.log(obj.password)\n        axios.post(\"http://111.229.81.92:8000/index/user/registerApi\",\n            JSON.stringify({\n                username: obj.user_name,\n                password: obj.password,\n                email: obj.email_address\n            }),\n            {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\"\n                }\n            }\n        )\n            .then ((response) => {\n                console.log(response)\n                if (response.data[0]==\"201\") {\n                    alert(\"注册成功\")\n                    console.log(\"usr status:\")\n                    window.sessionStorage.setItem(\"uid\", response.data[1].uid)\n                    window.sessionStorage.setItem(\"login\", true)\n                    window.sessionStorage.setItem(\"usremail\", obj.email_address)\n                    console.log(window.sessionStorage.getItem('uid'))\n                    console.log(window.sessionStorage.getItem('login'))\n                    router_func.toHome(obj)\n                }\n            })\n            .catch (\n                (error) => {\n                    console.log(error);\n                })\n    }else {\n        // this.$alert('Please enter the correct verification code!', 'Error', {\n        //     confirmButtonText: 'OK',\n        //     callback: action => {\n        //         this.$message({\n        //             type: 'info',\n        //             message: `action: ${ action }`\n        //         });\n        //     }\n        //\n        // });\n        console.log(\"wrong ver_code\")\n    }\n\n}\n\nexport default {\n    sendEmail,\n    userRegister\n}"]}]}