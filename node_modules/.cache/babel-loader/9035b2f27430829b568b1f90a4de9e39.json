{"remainingRequest":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/babel-loader/lib/index.js!/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyuwei/Documents/vue/RecommendSystem/src/components/upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/src/components/upload.vue","mtime":1618154185617},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyuwei/Documents/vue/RecommendSystem/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL3poYW5neXV3ZWkvRG9jdW1lbnRzL3Z1ZS9SZWNvbW1lbmRTeXN0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB1cGxvYWRfZnVuYyBmcm9tICcuLi9hcGkvdXBsb2FkJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd1cGxvYWQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb29kX25hbWU6ICIiLAogICAgICBmb29kX2Rlc2M6ICIiLAogICAgICBmaWxlTGlzdDogW10sCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAiIiwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGJhc2U2NDogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRGaWxlOiBmdW5jdGlvbiBnZXRGaWxlKGZpbGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsZUxpc3QpOwogICAgICB0aGlzLmdldEJhc2U2NChmaWxlLnJhdykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2coInN1Y2Nlc3MiKTsKICAgICAgICBjb25zb2xlLmxvZygicmVzID0gIiArIHJlcyk7CiAgICAgICAgdmFyIHBhcmFtcyA9IHJlcy5zcGxpdCgnLCcpOyAvLyBjb25zb2xlLmxvZyhwYXJhbXMsICdwYXJhbXMnKQoKICAgICAgICBpZiAocGFyYW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgIF90aGlzLmJhc2U2NCA9IHBhcmFtc1sxXTsgLy8gY29uc29sZS5sb2codGhpcy5iYXNlNjQpCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygicGFyOiIpCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXJhbXMpCgogICAgICAgICAgY29uc29sZS5sb2coX3R5cGVvZihfdGhpcy5iYXNlNjQpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldEJhc2U2NDogZnVuY3Rpb24gZ2V0QmFzZTY0KGZpbGUpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICB2YXIgaW1nUmVzdWx0ID0gJyc7CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CgogICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpbWdSZXN1bHQgPSByZWFkZXIucmVzdWx0OwogICAgICAgIH07CgogICAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH07CgogICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKGltZ1Jlc3VsdCk7CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlVXBsb2FkUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRSZW1vdmUoZmlsZUxpc3QpIHsKICAgICAgZmlsZUxpc3QgPSBbXTsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9ICIiLCB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgY29uc29sZS5sb2coZmlsZUxpc3QpOwogICAgfSwKICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIHVwTG9hZDogZnVuY3Rpb24gdXBMb2FkKCkgewogICAgICBjb25zb2xlLmxvZygi5LiK5Lyg5LqGIik7CiAgICAgIHVwbG9hZF9mdW5jLnVwbG9hZEZvb2QodGhpcyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,OAAA,WAAA,MAAA,eAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,cAAA,EAAA,EAJA;AAKA,MAAA,aAAA,EAAA,KALA;AAMA,MAAA,MAAA,EAAA;AANA,KAAA;AAQA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,mBACA,IADA,EACA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,QAAA;AACA,WAAA,SAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,SAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,WAAA,GAAA;AACA,YAAA,MAAA,GAAA,GAAA,CAAA,KAAA,CAAA,GAAA,CAAA,CAHA,CAIA;;AACA,YAAA,MAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,GAAA,MAAA,CAAA,CAAA,CAAA,CADA,CAEA;AACA;AACA;;AACA,UAAA,OAAA,CAAA,GAAA,SAAA,KAAA,CAAA,MAAA;AACA;AACA,OAZA;AAaA,KAhBA;AAiBA,IAAA,SAjBA,qBAiBA,IAjBA,EAiBA;AACA,aAAA,IAAA,OAAA,CAAA,UAAA,OAAA,EAAA,MAAA,EAAA;AACA,YAAA,MAAA,GAAA,IAAA,UAAA,EAAA;AACA,YAAA,SAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,IAAA;;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,YAAA;AACA,UAAA,SAAA,GAAA,MAAA,CAAA,MAAA;AACA,SAFA;;AAGA,QAAA,MAAA,CAAA,OAAA,GAAA,UAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,CAAA;AACA,SAFA;;AAGA,QAAA,MAAA,CAAA,SAAA,GAAA,YAAA;AACA,UAAA,OAAA,CAAA,SAAA,CAAA;AACA,SAFA;AAGA,OAbA,CAAA;AAcA,KAhCA;AAiCA,IAAA,kBAjCA,8BAiCA,QAjCA,EAiCA;AACA,MAAA,QAAA,GAAA,EAAA;AACA,WAAA,cAAA,GAAA,EAAA,EACA,KAAA,aAAA,GAAA,KADA;AAEA,MAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,KAtCA;AAuCA,IAAA,wBAvCA,oCAuCA,IAvCA,EAuCA;AACA,WAAA,cAAA,GAAA,IAAA,CAAA,GAAA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,KA1CA;AA2CA,IAAA,MA3CA,oBA2CA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,MAAA,WAAA,CAAA,UAAA,CAAA,IAAA;AACA;AA9CA;AAZA,CAAA","sourcesContent":["<template>\n    \n    <div class = \"main\">\n        <h2> Recommend</h2>\n        <el-input v-model=\"food_name\" placeholder=\"请输入食物名\" clearable></el-input><br /><br />\n        <el-input type=\"textarea\" :autosize=\"{ minRows: 6}\" v-model=\"food_desc\" placeholder=\"请输入推荐理由\" clearable></el-input>\n        <br /><br />\n      <el-upload\n            list-type=\"picture\"\n            action=''\n            accept=\".jpg, .png\"\n            :limit=\"1\"\n            :auto-upload=\"false\"\n            :file-list=\"fileList\"\n            :on-change=\"getFile\"\n            :on-preview=\"handlePictureCardPreview\"\n            :on-remove=\"handleUploadRemove\"\n            :width=\"10\"\n        >\n            <br />\n            <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\n                <img width=\"100%\" :src=\"dialogImageUrl\" alt />\n            </el-dialog>\n            <el-button type=\"info\" plain >选择食物图片</el-button>\n            <div slot=\"tip\" class=\"el-upload__tip\">只能上传一张jpg/png文件</div>\n        </el-upload>\n        <el-row>\n            <el-button type=\"danger\">取消</el-button>\n            <el-button type=\"success\" @click=\"upLoad()\">上传</el-button>\n        </el-row>\n    </div>\n\n</template>\n\n<script>\nimport upload_func from '../api/upload'\nexport default {\n  name: 'upload',\n  data() {\n    return {\n        food_name: \"\",\n        food_desc: \"\",\n        fileList: [],\n        dialogImageUrl: \"\",\n        dialogVisible: false,\n        base64: \"\"\n    }\n  },\n  methods: { \n      getFile(file) {\n        console.log(this.fileList)\n        this.getBase64(file.raw).then(res => {\n            console.log(\"success\")\n            console.log(\"res = \" + res)\n            const params = res.split(',')\n            // console.log(params, 'params')\n            if (params.length > 0) {\n                this.base64 = params[1]\n                // console.log(this.base64)\n                // console.log(\"par:\")\n                // console.log(params)\n                console.log(typeof(this.base64))\n            }\n        })\n      },\n      getBase64(file) {\n        return new Promise(function (resolve, reject) {\n            const reader = new FileReader()\n            let imgResult = ''\n            reader.readAsDataURL(file)\n            reader.onload = function () {\n                imgResult = reader.result\n            }\n            reader.onerror = function (error) {\n                reject(error)\n            }\n            reader.onloadend = function () {\n                resolve(imgResult)\n            }\n        })\n      },\n      handleUploadRemove(fileList) {\n        fileList = []\n        this.dialogImageUrl = \"\",\n        this.dialogVisible = false\n        console.log(fileList)\n      },\n      handlePictureCardPreview(file) {\n        this.dialogImageUrl = file.url;\n        this.dialogVisible = true;\n      },\n      upLoad() {\n          console.log(\"上传了\")\n          upload_func.uploadFood(this)\n      }\n  }\n}\n</script>\n\n<style scoped>\n.main{\n\ttext-align: center;\n\twidth: 500px;\n\tmargin: auto;\n}\n</style>"],"sourceRoot":"src/components"}]}